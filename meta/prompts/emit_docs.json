{
  "task": "Emit initial design documentation",
  "objective": "Generate SSOT docs capturing the Cell SDF Topology research design, including core paradigm, operator catalog, signal/lineage models, persistence windows, and the role of residuals as discovery.",
  "constraints": {
    "style": "Markdown, clear headings, no filler text",
    "placement": "docs/"
  },
  "outputs": {
    "files": [
      "docs/design_spec.md",
      "docs/open_questions.md",
      "docs/operator_catalog.md",
      "docs/audit_spec.md"
    ]
  },
  "heredocs": {
    "docs/design_spec.md": [
      "# Cell SDF Topology - Design Spec",
      "",
      "## Introduction",
      "This document is the single source of truth (SSOT) for the **Cell SDF Topology** research project. It describes how time-conditioned signed distance fields (SDFs) can represent cell surfaces, including processes that change topology over time (division, fusion, etc.).",
      "",
      "## Core Paradigm: SDF as SSOT",
      "- Geometry represented as **F(x,y,z,t)**.",
      "- Voxel volumes are derived, not stored.",
      "- Signals and lineage attach to surfaces defined by F.",
      "",
      "## Topological Operators",
      "- Operators are defined and refined through fitting against voxel data.",
      "- Known primitives: division, fusion, protrusion/blebs, ruffling, rounding.",
      "- Catalog is data-driven: residual errors surface new operator archetypes.",
      "",
      "## Signal Model",
      "- Signals anchored at surfaces and regions (membrane, cytosol, nucleus).",
      "- Stored as curves (time series + spectra).",
      "- Patch model: keyframes + deltas with provenance tags.",
      "",
      "## Lineage Model: Identities and World-Tubes",
      "- Each cell identity tracked as a soft field Ii(x,t).",
      "- World-tubes represent continuous life histories.",
      "- Division -> tube splits; fusion -> tubes merge.",
      "- Timing is determined by persistence of topological change and operator schedules (s(t)).",
      "",
      "## Storage Model and API",
      "- **Geometry**: base SDF, operator params, event schedules.",
      "- **Signals**: curve data with keyframe/deltas.",
      "- **Lineage**: identity schedules.",
      "- APIs: reconstruct voxel subvolumes, query surfaces, fetch signals, export lineage.",
      "",
      "## Audit and Discovery",
      "- **Quality gates**: Hausdorff error < threshold, eikonal regularity, locality checks.",
      "- **Provenance**: each value labeled as measured/interpolated/extrapolated.",
      "- **Residuals**: systematic mismatches flagged as novelty -> candidate new operators.",
      "- **Persistence windows**: events must persist across time *and* space beyond noise thresholds before being recorded as true topological changes."
    ],
    "docs/open_questions.md": [
      "# Open Questions",
      "",
      "## Time-Varying Geometry",
      "- Should geometry be modeled as a true 4D SDF F(x,y,z,t) or keyframes + deformations?",
      "",
      "## Operator Catalog Granularity",
      "- How many primitives are enough to cover observed biology?",
      "- When does a residual warrant a new operator vs improved fit?",
      "",
      "## Spectral Anchoring Resolution",
      "- How many shells or region samples are required to capture meaningful signal gradients?",
      "",
      "## Event Detection Robustness",
      "- How to avoid false positives from noise or transient constrictions?",
      "- What persistence window (time + spatial displacement) is biologically reasonable?",
      "",
      "## Compute vs Storage",
      "- Optimal balance between upfront compute for fitting vs long-term storage savings?"
    ],
    "docs/operator_catalog.md": [
      "# Operator Catalog (Data-Driven)",
      "",
      "Operators are not pre-defined abstractions but **fitted objects** derived from voxel data.",
      "",
      "## Current Primitives",
      "- **Division**: cleavage plane operator with depth schedule.",
      "- **Fusion**: neck operator with radius schedule.",
      "- **Protrusion/Blebs**: local lobe operators.",
      "- **Ruffling**: sinusoidal offsets along tangent frames.",
      "- **Rounding**: isotropic deformation.",
      "",
      "## Process for Expansion",
      "1. Fit known operators to voxel data.",
      "2. Compute residuals.",
      "3. Cluster persistent residuals.",
      "4. If systematic, promote to a new operator archetype.",
      "",
      "## Catalog Entry Template",
      "- **Name**: short identifier.",
      "- **Definition**: SDF operator form.",
      "- **Parameters**: knobs that define variations.",
      "- **Provenance**: datasets where observed, fit residual metrics.",
      "- **Biological interpretation**: mapping to observed process."
    ],
    "docs/audit_spec.md": [
      "# Audit Spec",
      "",
      "## Purpose",
      "Auditing ensures emitted docs and fitted operators remain consistent, reproducible, and scientifically grounded.",
      "",
      "## Audit Dimensions",
      "- **Section completeness**: all required parts of SSOT docs present.",
      "- **Quality gates**: geometric error, signal fidelity, eikonal constraint.",
      "- **Residual analysis**: systematic mismatches flagged.",
      "- **Lineage validation**: tube splits/merges align with persistent topology change.",
      "- **Persistence window checks**: events must last for â‰¥N frames and exceed spatial displacement thresholds (beyond imaging noise floor).",
      "",
      "## Discovery Pipeline",
      "- Residuals are not only QC but also signals of new biology.",
      "- Candidate anomalies -> reviewed as potential operator archetypes.",
      "- Persistence windows vary by process:",
      "  - Division: 5-10 frames at 1-2 min cadence, separation > voxel resolution.",
      "  - Fusion: 3-5 frames with enlarging contact patch.",
      "  - Blebs/protrusions: short-lived; detect via curvature/displacement rather than time gating.",
      "",
      "## Outputs",
      "- Audit reports (`audit_docs_report.md`) with pass/fail + notes.",
      "- Residual heatmaps for visual inspection."
    ]
  }
}
